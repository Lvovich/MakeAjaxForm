window.MakeAjaxForm=function(a){if("object"!==typeof this||this===window)return console.error('makeAjaxForm: incorrect call without "new". Plugin Off!'),{};(function(){a.container=""+a.container||".eff422e211a0627cfeb1dcc88e75b314146";a.submit=""+a.submit||".eff422e211a0627cfeb1dcc88e75b314146";a.target=""+a.target||"/";"function"!==typeof a.onBeforeExchange&&(a.onBeforeExchange=function(){});"function"!==typeof a.onExchangeSuccess&&(a.onExchangeSuccess=function(){console.warn('makeAjaxForm: parameter "onExchangeSuccess" is not a function')});
"function"!==typeof a.onExchangeError&&(a.onExchangeError=function(){console.warn('makeAjaxForm: parameter "onExchangeError" is not a function')});"function"!==typeof a.onValidationError&&(a.onValidationError=function(){console.warn('makeAjaxForm: parameter "onValidationError" is not a function')})})();return function(b){b.i=document.querySelector(a.container);b.h=document.querySelector(a.submit);if(!b.i||!b.h)return console.error('makeAjaxForm: parameters "container" or "submit" is invalid. Plugin Off!'),
{};b.h.addEventListener("click",function(){var c=new XMLHttpRequest,d=b.j(b),f=b.m(d,a);if(!1===f)return!1;var e=setTimeout(function(){c.abort();a.onExchangeError("No server response for a long times. Exchange aborted. Try to reload the page.")},3E4);c.open("post",a.target,!0);c.onreadystatechange=function(){if(4==c.readyState)if(clearTimeout(e),200==c.status)a.onExchangeSuccess(c.responseText);else a.onExchangeError(c.status+": "+c.statusText)};d=b.l(d,f.formData,a);d.f.length&&c.setRequestHeader("Content-Type",
"multipart/form-data; boundary="+d.f);c.send(d.data)})}(this)};window.MakeAjaxForm.prototype.a=Object.create(null);window.MakeAjaxForm.prototype.a.c=function(a,b){var c=Object.create(null);c.element=a;c.type=b;return c};window.MakeAjaxForm.prototype.a.b=function(a,b,c){c=c||[];var d=Object.create(null);d.name=a;d.value=b;d.g=c;return d};
window.MakeAjaxForm.prototype.a.input=function(a){var b=[],c=[];a.value?"checkbox"===a.type||"radio"===a.type?a.checked?b.push(this.b(a.name,a.value)):a.hasAttribute("required")&&c.push(this.c(a,"required_wo_check")):"file"===a.type?b.push(this.b(a.name,a.value,a.files)):b.push(this.b(a.name,a.value)):a.hasAttribute("required")&&c.push(this.c(a,"required_wo_value"));return{data:b,valid:c}};
window.MakeAjaxForm.prototype.a.select=function(a){for(var b=[],c=[],d=0,f=a.options.length;d<f;d++){var e=a.options[d];!e.disabled&&e.selected&&e.value&&b.push(this.b(a.name,e.value))}a.hasAttribute("required")&&!b.length&&c.push(this.c(a,"required_wo_check"));return{data:b,valid:c}};window.MakeAjaxForm.prototype.a.textarea=function(a){var b=[],c=[];a.value?b.push(this.b(a.name,a.value)):a.hasAttribute("required")&&c.push(this.c(a,"required_wo_value"));return{data:b,valid:c}};window.MakeAjaxForm.prototype.j=function(a){var b=[],c=[];["input","select","textarea"].forEach(function(d){if(d in a.a)for(var f=a.i.querySelectorAll(d),e=0,h=f.length;e<h;e++){var g=f[e];g!==a.h&&g.name&&(g=a.a[d](g),b=b.concat(g.data),c=c.concat(g.valid))}});return{data:b,validationErrors:c}};window.MakeAjaxForm.prototype.m=function(a,b){var c=Object.create(null);if(!1===b.onBeforeExchange(a))return!1;if(0<a.validationErrors.length)return a.validationErrors.forEach(function(a){b.onValidationError(a)}),!1;if(0===a.data.length)return b.onExchangeError("no_valid_data"),!1;c.formData=window.FormData?new FormData:!1;return c};window.MakeAjaxForm.prototype.l=function(a,b,c){var d=Object.create(null);if(b)a.data.forEach(function(a){b.append(a.name,a.g.length?a.g[0]:a.value)}),d.f="",d.data=b;else{var f="maf"+(""+Math.random()).slice(2,18),e="--"+f+"\r\n",h="--"+f+"--\r\n",g=["\r\n"];a.data.forEach(function(a){if(a.g.length)c.onExchangeError("file_exchange_disabled");else g.push('Content-Disposition: form-data; name="'+a.name+'"\r\n\r\n'+a.value+"\r\n")});d.f=f;d.data=g.join(e)+h}return d};
