window.MakeAjaxForm=function(a){(function(){a.container=""+a.container||".eff422e211a0627cfeb1dcc88e75b314146";a.submit=""+a.submit||".eff422e211a0627cfeb1dcc88e75b314146";a.target=""+a.target||"/";"function"!==typeof a.onBeforeExchange&&(a.onBeforeExchange=function(){});"function"!==typeof a.onExchangeSuccess&&(a.onExchangeSuccess=function(){console.warn('makeAjaxForm: parameter "onExchangeSuccess" is not a function')});"function"!==typeof a.onExchangeError&&(a.onExchangeError=function(){console.warn('makeAjaxForm: parameter "onExchangeError" is not a function')});
"function"!==typeof a.onValidationError&&(a.onValidationError=function(){console.warn('makeAjaxForm: parameter "onValidationError" is not a function')})})();this.i=document.querySelector(a.container);this.h=document.querySelector(a.submit);if(!this.i||!this.h)return console.error('makeAjaxForm: parameters "container" or "submit" is invalid. Plugin Off!'),!1;var c=this;this.h.addEventListener("click",function(){var b=new XMLHttpRequest,d=c.l(c),f=c.o(d,a);if(!1===f)return!1;var e=setTimeout(function(){b.abort();
a.onExchangeError("No server response for a long times. Exchange aborted. Try to reload the page.")},3E4);b.open("post",a.target,!0);b.onreadystatechange=function(){if(4==b.readyState)if(clearTimeout(e),200==b.status)a.onExchangeSuccess(b.responseText);else a.onExchangeError(b.status+": "+b.statusText)};d=c.m(d,f.formData,a);d.f.length&&b.setRequestHeader("Content-Type","multipart/form-data; boundary="+d.f);b.send(d.data)})};window.MakeAjaxForm.prototype.a=Object.create(null);window.MakeAjaxForm.prototype.a.c=function(a,c){var b=Object.create(null);b.element=a;b.type=c;return b};window.MakeAjaxForm.prototype.a.b=function(a,c,b){b=b||[];var d=Object.create(null);d.name=a;d.value=c;d.g=b;return d};
window.MakeAjaxForm.prototype.a.input=function(a){var c=[],b=[];a.value?"checkbox"===a.type||"radio"===a.type?a.checked?c.push(this.b(a.name,a.value)):a.hasAttribute("required")&&b.push(this.c(a,"required_wo_check")):"file"===a.type?c.push(this.b(a.name,a.value,a.files)):c.push(this.b(a.name,a.value)):a.hasAttribute("required")&&b.push(this.c(a,"required_wo_value"));return{data:c,valid:b}};
window.MakeAjaxForm.prototype.a.select=function(a){for(var c=[],b=[],d=0,f=a.options.length;d<f;d++){var e=a.options[d];!e.disabled&&e.selected&&e.value&&c.push(this.b(a.name,e.value))}a.hasAttribute("required")&&!c.length&&b.push(this.c(a,"required_wo_check"));return{data:c,valid:b}};window.MakeAjaxForm.prototype.a.textarea=function(a){var c=[],b=[];a.value?c.push(this.b(a.name,a.value)):a.hasAttribute("required")&&b.push(this.c(a,"required_wo_value"));return{data:c,valid:b}};window.MakeAjaxForm.prototype.l=function(a){var c=[],b=[];["input","select","textarea"].forEach(function(d){if(d in a.a)for(var f=a.i.querySelectorAll(d),e=0,h=f.length;e<h;e++){var g=f[e];g!==a.h&&g.name&&(g=a.a[d](g),c=c.concat(g.data),b=b.concat(g.valid))}});return{data:c,j:b}};window.MakeAjaxForm.prototype.o=function(a,c){var b=Object.create(null);if(!1===c.onBeforeExchange(a))return!1;if(0<a.j.length)return a.j.forEach(function(a){c.onValidationError(a)}),!1;if(0===a.data.length)return c.onExchangeError("no_valid_data"),!1;b.formData=window.FormData?new FormData:!1;return b};window.MakeAjaxForm.prototype.m=function(a,c,b){var d=Object.create(null);if(c)a.data.forEach(function(a){c.append(a.name,a.g.length?a.g[0]:a.value)}),d.f="",d.data=c;else{var f="maf"+(""+Math.random()).slice(2,18),e="--"+f+"\r\n",h="--"+f+"--\r\n",g=["\r\n"];a.data.forEach(function(a){if(a.g.length)b.onExchangeError("file_exchange_disabled");else g.push('Content-Disposition: form-data; name="'+a.name+'"\r\n\r\n'+a.value+"\r\n")});d.f=f;d.data=g.join(e)+h}return d};
