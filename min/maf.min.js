'use strict';window.MakeAjaxForm=function(a){if("object"!==typeof this||this===window)return console.error('makeAjaxForm: incorrect call without "new". Plugin Off!'),{};a.target=""+a.target||"/";a.waitingtime=+a.waitingtime?+a.waitingtime:3600;if(!a.container||!a.submit)return console.error('MakeAjaxForm: parameters "container" or "submit" is invalid. Plugin Off!'),{};"function"!==typeof a.onDataCollected&&(a.onDataCollected=function(){});"function"!==typeof a.onValidationError&&(a.onValidationError=
function(){});"function"!==typeof a.onStartExchange&&(a.onStartExchange=function(){});"function"!==typeof a.onExchangeError&&(a.onExchangeError=function(){});"function"!==typeof a.onExchangeSuccess&&(a.onExchangeSuccess=function(){});return function(e){e.f=a.container;e.b=a.submit;var c=e.b.attachEvent;if(e.b.addEventListener)c=e.b.addEventListener;else if(!c)return;c.call(e.b,"click",function(){var b=new XMLHttpRequest,d=e.g(),c=e.i(d,a);if(!1===c)return!1;var g=setTimeout(function(){b.abort();a.onExchangeError("No server response for a long times. Exchange aborted. Try to reload the page.")},
1E3*a.waitingtime);b.open("post",a.target,!0);b.onreadystatechange=function(){if(4===b.readyState)if(clearTimeout(g),200===b.status)a.onExchangeSuccess(b.responseText);else a.onExchangeError(b.status+": "+b.statusText)};d=e.h(d,c.formData,a);d.c.length&&b.setRequestHeader("Content-Type","multipart/form-data; boundary="+d.c);b.send(d.data)})}(this)};
(function(a){function e(b){return{element:b,fileData:b.files||[]}}function c(b,a){return{element:b,type:a}}a.a={};a.a.input=function(b){var a=[],f=[];!b.hasAttribute("required")||b.value&&!b.disabled?"checkbox"===b.type||"radio"===b.type?b.checked?a.push(e(b)):b.hasAttribute("required")&&f.push(c(b,"required_wo_check")):a.push(e(b)):f.push(c(b,"required_wo_value"));return{data:a,valid:f}};a.a.select=function(b){var a=[],f=[];if(!b.disabled){for(var g=0,k=b.options.length;g<k;g++){var h=b.options[g];
!h.disabled&&h.selected&&h.value&&a.push(e(b))}b.hasAttribute("required")&&!a.length&&f.push(c(b,"required_wo_check"))}return{data:a,valid:f}};a.a.textarea=function(a){var d=[],f=[];!a.hasAttribute("required")||a.value&&!a.disabled?d.push(e(a)):f.push(c(a,"required_wo_value"));return{data:d,valid:f}}})(window.MakeAjaxForm.prototype);
(function(a){a.g=function(){var a=[],c=[],b=["input","select","textarea"];(function(d){b.forEach(function(b){if(b in d.a)for(var g=d.f.querySelectorAll(b),k=0,h=g.length;k<h;k++){var l=g[k];l!==d.b&&l.name&&(l=d.a[b](l),a=a.concat(l.data),c=c.concat(l.valid))}})})(this);return{data:a,validationErrors:c}}})(window.MakeAjaxForm.prototype);
(function(a){a.i=function(a,c){var b={};if(!1===c.onDataCollected(a))return!1;if(0<a.validationErrors.length)return a.validationErrors.forEach(function(a){c.onValidationError(a)}),!1;if(!1===c.onStartExchange())return!1;if(0===a.data.length)return c.onExchangeError("no_valid_data"),!1;b.formData=window.FormData?new FormData:!1;return b}})(window.MakeAjaxForm.prototype);
(function(a){a.h=function(a,c,b){var d={};if(c)a.data.forEach(function(a){c.append(a.element.name,a.fileData.length?a.fileData[0]:a.element.value)}),d.c="",d.data=c;else{var f="maf"+(""+Math.random()).slice(2,18),g="--"+f+"\r\n",k="--"+f+"--\r\n",h=["\r\n"];a.data.forEach(function(a){if(a.fileData.length)b.onExchangeError("file_exchange_disabled");else h.push('Content-Disposition: form-data; name="'+a.element.name+'"\r\n\r\n'+a.element.value+"\r\n")});d.c=f;d.data=h.join(g)+k}return d}})(window.MakeAjaxForm.prototype);
