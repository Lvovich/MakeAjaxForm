/**
 * @file makeAjaxForm
 * @version 6.0
 *
 * @author Lvovich
 * @see {@link https://github.com/Lvovich/makeAjaxForm|GitHub}
 *
 * @license MIT
 */
'use strict';try{window.makeAjaxForm=function(a){if(a.container&&"object"===typeof a.container&&a.submit&&"object"===typeof a.submit){var b=window.makeAjaxForm;a=b.i({f:a.container,submit:a.submit,target:""+a.target||"/",s:+a.waitingtime?+a.waitingtime:3600,onDataCollected:function(){},onStartExchange:function(){},onExchangeError:function(){},onExchangeSuccess:function(){}},{onDataCollected:a.onDataCollected,onStartExchange:a.onStartExchange,onExchangeError:a.onExchangeError,onExchangeSuccess:a.onExchangeSuccess});
b.m(a.submit,{handleEvent:b.o,l:a})}else console.error('makeAjaxForm: parameters "container" or "submit" is invalid. Plugin Off!')},function(a){a.a={};a.a.input=function(b){if(!b.disabled)if("checkbox"===b.type||"radio"===b.type){if(b.checked)return[a.b(b,b.value,b.hasAttribute("required"))]}else return[a.b(b,b.value,b.hasAttribute("required"))];return[]};a.a.select=function(b){var f=[];if(!b.disabled)for(var c=0;c<b.options.length;c++){var e=b.options[c];!e.disabled&&e.selected&&f.push(a.b(b,e.value,
b.hasAttribute("required")))}return f};a.a.textarea=function(b){return b.disabled?[]:[a.b(b,b.value,b.hasAttribute("required"))]}}(window.makeAjaxForm),function(a){a.g=function(b){var f=["input","select","textarea"],c=[],e,d,g,h;for(e=0;e<f.length;e++)for(g=f[e],h=b.f.getElementsByTagName(g),d=0;d<h.length;d++)h[d]!==b.submit&&h[d].name&&(c=c.concat(a.a[g](h[d])));return c}}(window.makeAjaxForm),function(a){a.h=function(b){var a={},c=window.FormData?new window.FormData:!1,e,d,g;if(c){for(e=0;e<b.length;e++)d=
b[e],g=d.fileData.length?d.fileData[0]:d.value,c.append(d.element.name,g);a.c="";a.data=c}else{c="maf"+(""+Math.random()).slice(2,18);g="--"+c+"\r\n";var h="--"+c+"--\r\n",k=["\r\n"];for(e=0;e<b.length;e++)d=b[e],k.push('Content-Disposition: form-data; name="'+d.element.name+'"\r\n\r\n'+d.value+"\r\n");a.c=c;a.data=k.join(g)+h}return a}}(window.makeAjaxForm),function(a){a.i=function(b,a){var c={onDataCollected:"function",onStartExchange:"function",onExchangeError:"function",onExchangeSuccess:"function"},
e={},d;for(d in b)b.hasOwnProperty(d)&&(e[d]=d in c?d in a&&typeof a[d]===c[d]?a[d]:b[d]:d in a?a[d]:b[d]);return e};a.b=function(b,a,c){return{element:b,value:a,required:c,fileData:b.files||[]}};a.m=function(b,a){if(b.addEventListener)b.addEventListener("click",a);else if(b.attachEvent){var c=a;a.handleEvent&&(c=function(){a.handleEvent.call(a)});b.attachEvent("onclick",c)}}}(window.makeAjaxForm),function(a){a.j=function(a,f){return!1===f.onDataCollected(a)||!1===f.onStartExchange()?!1:a.length?
!0:(f.onExchangeError(["Collected no valid data."]),!1)}}(window.makeAjaxForm),function(a){a.o=function(){var b=new XMLHttpRequest,f=this.l,c=a.g(f);if(a.j(c,f)){var e=setTimeout(function(){b.abort();f.onExchangeError("No server response for a long times. Exchange aborted.")},1E3*f.s);b.open("post",f.target,!0);b.onreadystatechange=function(){if(4===b.readyState)if(clearTimeout(e),200===b.status)f.onExchangeSuccess(b.responseText);else f.onExchangeError(b.status+": "+b.statusText)};c=a.h(c);c.c.length&&
b.setRequestHeader("Content-Type","multipart/form-data; boundary="+c.c);b.send(c.data)}}}(window.makeAjaxForm)}catch(a){console.dir(a)};
